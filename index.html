<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‚ö° GOOGLE NEWS PREMIUM - GAMBAR DARI GOOGLE + KONTEN LENGKAP</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; 
            background: #f0f4f8; 
            padding: 30px 20px;
            color: #1a2639;
        }
        .container { max-width: 1400px; margin: 0 auto; }
        .header {
            background: linear-gradient(145deg, #0a1a2f, #0e2a47);
            color: white;
            border-radius: 28px;
            padding: 40px 45px;
            margin-bottom: 35px;
        }
        h1 { font-size: 2.6rem; font-weight: 700; margin-bottom: 12px; }
        .badge {
            background: rgba(255,255,255,0.12);
            padding: 8px 22px;
            border-radius: 60px;
            font-weight: 600;
            font-size: 0.9rem;
            display: inline-block;
            margin-right: 12px;
        }
        .grid-main {
            display: grid;
            grid-template-columns: 1.1fr 1.4fr;
            gap: 30px;
        }
        @media (max-width: 1100px) { .grid-main { grid-template-columns: 1fr; } }
        .card {
            background: white;
            border-radius: 24px;
            padding: 35px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.02);
            border: 1px solid #e9edf4;
        }
        .card h2 {
            font-size: 1.6rem;
            margin-bottom: 30px;
            display: flex;
            align-items: center;
            gap: 14px;
            border-bottom: 1px solid #eef2f6;
            padding-bottom: 20px;
        }
        .form-group { margin-bottom: 25px; }
        label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: #2c3e50;
        }
        input, select, textarea {
            width: 100%;
            padding: 15px 20px;
            border: 2px solid #dfe5ec;
            border-radius: 16px;
            font-size: 1rem;
            background: #fafcff;
        }
        input:focus, select:focus, textarea:focus {
            border-color: #0a1a2f;
            outline: none;
        }
        .domain-row {
            display: flex;
            gap: 15px;
            align-items: center;
        }
        .domain-prefix {
            background: #e9edf4;
            padding: 15px 20px;
            border-radius: 16px;
            color: #3a4e62;
            font-weight: 500;
            border: 2px solid #dfe5ec;
        }
        .btn {
            background: #0a1a2f;
            color: white;
            border: none;
            padding: 18px 32px;
            border-radius: 60px;
            font-weight: 700;
            font-size: 1.1rem;
            cursor: pointer;
            transition: 0.2s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            width: 100%;
        }
        .btn:hover {
            background: #1e3a5a;
            transform: translateY(-3px);
        }
        .file-list {
            background: #f8fbfe;
            border-radius: 20px;
            padding: 20px;
            max-height: 380px;
            overflow-y: auto;
            border: 1px solid #e0e8f0;
            font-family: monospace;
        }
        .file-item {
            padding: 12px 16px;
            border-bottom: 1px solid #edf2f7;
            display: flex;
            align-items: center;
            gap: 14px;
        }
        .progress-bar {
            width: 100%;
            height: 10px;
            background: #e2ecf5;
            border-radius: 20px;
            overflow: hidden;
            margin: 20px 0;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #0a1a2f, #2c7da0);
            width: 0%;
            transition: width 0.25s;
        }
        .preview-img {
            width: 100%;
            height: 180px;
            object-fit: cover;
            border-radius: 12px;
            border: 1px solid #d0e0f0;
        }
        .article-content-preview {
            background: #f8fbfe;
            padding: 20px;
            border-radius: 12px;
            max-height: 300px;
            overflow-y: auto;
            font-size: 0.9rem;
            line-height: 1.6;
            border: 1px solid #e0e8f0;
        }
    </style>
    
    <!-- JSZip + FileSaver -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
</head>
<body>
    <div class="container">
        <!-- HEADER -->
        <div class="header">
            <h1>üîç GOOGLE NEWS PREMIUM ¬∑ GAMBAR ASLI GOOGLE</h1>
            <p style="font-size: 1.2rem; color: #b0d4f0; margin-bottom: 20px;">
                ‚úì Gambar dari Google Image Search ‚Ä¢ ‚úì Konten lengkap dari artikel asli ‚Ä¢ ‚úì 5-7 paragraf
            </p>
            <div>
                <span class="badge">üñºÔ∏è GOOGLE IMAGES</span>
                <span class="badge">üìÑ FULL CONTENT</span>
                <span class="badge">üåê 7 BAHASA</span>
                <span class="badge">‚ö° ZIP INSTAN</span>
            </div>
        </div>

        <!-- MAIN GRID -->
        <div class="grid-main">
            <!-- LEFT PANEL - KONFIGURASI -->
            <div class="card">
                <h2><span>‚öôÔ∏è</span> 1. Konfigurasi</h2>
                
                <!-- KEYWORD -->
                <div class="form-group">
                    <label>üîë Keyword Utama</label>
                    <input type="text" id="keyword" value="artificial intelligence" placeholder="Contoh: cryptocurrency, climate change">
                </div>
                
                <!-- DOMAIN -->
                <div class="form-group">
                    <label>üåê Domain</label>
                    <div class="domain-row">
                        <span class="domain-prefix">https://</span>
                        <input type="text" id="domain" value="yournewsportal.com" placeholder="domainkamu.com">
                    </div>
                </div>
                
                <!-- BAHASA & JUMLAH -->
                <div style="display: flex; gap: 20px;">
                    <div style="flex: 1;">
                        <label>üåé Bahasa</label>
                        <select id="language">
                            <option value="id">üáÆüá© Indonesia</option>
                            <option value="us" selected>üá∫üá∏ English (US)</option>
                            <option value="gb">üá¨üáß English (UK)</option>
                            <option value="jp">üáØüáµ Êó•Êú¨Ë™û</option>
                            <option value="sa">üá∏üá¶ ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option>
                            <option value="fr">üá´üá∑ Fran√ßais</option>
                            <option value="de">üá©üá™ Deutsch</option>
                        </select>
                    </div>
                    <div style="flex: 1;">
                        <label>üìÑ Jumlah</label>
                        <select id="jumlah">
                            <option value="5">5 artikel</option>
                            <option value="10" selected>10 artikel</option>
                            <option value="15">15 artikel</option>
                            <option value="20">20 artikel</option>
                        </select>
                    </div>
                </div>
                
                <!-- ADS SCRIPT -->
                <div style="background: #fffaf0; border: 1px dashed #f5b042; border-radius: 20px; padding: 25px; margin: 30px 0;">
                    <label style="color: #b45f06;">üì¢ ADS SCRIPT</label>
                    <textarea id="adsScript" rows="3" placeholder="&lt;!-- Script iklan Adsterra/Adsense --&gt;">&lt;div style=&quot;background: #1a2e3f; color: white; padding: 24px; border-radius: 16px; text-align: center;&quot;&gt;
    &lt;strong&gt;üì¢ IKLAN ANDA DI SINI&lt;/strong&gt;
&lt;/div&gt;</textarea>
                </div>
                
                <!-- HISTATS SCRIPT -->
                <div style="background: #f0f9ff; border: 1px dashed #2c7da0; border-radius: 20px; padding: 25px; margin: 30px 0;">
                    <label style="color: #0e4a5e;">üìä HISTATS COUNTER</label>
                    <textarea id="histatsScript" rows="3">&lt;!-- Histats.com START --&gt;
&lt;script&gt;
_Hasync.push([&apos;Histats.start&apos;, &apos;1,1234567,4,0,0,0,00000000&apos;]);
_Hasync.push([&apos;Histats.fasi&apos;, &apos;1&apos;]);
_Hasync.push([&apos;Histats.track_hits&apos;, &apos;&apos;]);
(function() {
  var hs = document.createElement(&apos;script&apos;); hs.async = true;
  hs.src = &apos;//s10.histats.com/js15_as.js&apos;;
  document.head.appendChild(hs);
})();
&lt;/script&gt;</textarea>
                </div>
                
                <!-- TOMBOL GENERATE -->
                <button onclick="generatePremium()" class="btn" style="background: #0a1a2f;">
                    ‚ö° GENERATE & DOWNLOAD ZIP
                </button>
                <p style="text-align: center; margin-top: 20px; color: #1e824c; font-weight: 600;">
                    ‚úÖ Gambar dari Google Image ‚Ä¢ Konten 5-7 paragraf ‚Ä¢ Siap pakai
                </p>
            </div>
            
            <!-- RIGHT PANEL - PREVIEW -->
            <div class="card">
                <h2><span>üìã</span> 2. Live Preview</h2>
                
                <!-- PROGRESS -->
                <div id="progressBlock" style="display: none;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
                        <span id="progressStatus" style="font-weight: 600;">Memproses...</span>
                        <span id="progressPercent" style="font-weight: 700;">0%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill" style="width: 0%;"></div>
                    </div>
                </div>
                
                <!-- FILE LIST -->
                <div style="margin: 0 0 25px;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 15px;">
                        <span style="font-weight: 700;">üìÅ File dalam ZIP</span>
                        <span id="fileCounter" style="background: #0a1a2f; color: white; padding: 4px 16px; border-radius: 60px;">0 file</span>
                    </div>
                    <div class="file-list" id="fileListContainer">
                        <div class="file-item" style="color: #6c7a89;">‚è≥ Generate untuk melihat daftar file...</div>
                    </div>
                </div>
                
                <!-- PREVIEW ARTIKEL -->
                <div style="margin-top: 25px;">
                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 18px;">
                        <span style="background: #0a1a2f; color: white; padding: 6px 18px; border-radius: 60px; font-size: 0.8rem;">üîç PREVIEW ARTIKEL</span>
                        <span id="previewLanguage" style="color: #2c5a7a;">üá∫üá∏ English (US)</span>
                    </div>
                    <div id="articlePreviewArea" style="background: white; border-radius: 20px; padding: 25px; border: 1px solid #e0e8f0; min-height: 400px;">
                        <div style="display: flex; align-items: center; justify-content: center; color: #6c7a89; padding: 60px;">
                            ‚è≥ Generate untuk preview artikel pertama
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ============================================
        // GOOGLE NEWS PREMIUM - GAMBAR DARI GOOGLE IMAGE SEARCH
        // KONTEN LENGKAP DARI ARTIKEL ASLI (5-7 PARAGRAF)
        // ============================================
        
        const RSS2JSON_API = 'https://api.rss2json.com/v1/api.json?rss_url=';
        const CORS_PROXY = 'https://api.allorigins.win/raw?url=';
        
        // KONFIGURASI BAHASA
        const LANG_CONFIG = {
            id: { hl: 'id', gl: 'ID', ceid: 'ID:id', name: 'Indonesia', code: 'id-ID' },
            us: { hl: 'en', gl: 'US', ceid: 'US:en', name: 'English (US)', code: 'en-US' },
            gb: { hl: 'en', gl: 'GB', ceid: 'GB:en', name: 'English (UK)', code: 'en-GB' },
            jp: { hl: 'ja', gl: 'JP', ceid: 'JP:ja', name: 'Japanese', code: 'ja-JP' },
            sa: { hl: 'ar', gl: 'SA', ceid: 'SA:ar', name: 'ÿßŸÑÿπÿ±ÿ®Ÿäÿ©', code: 'ar-SA' },
            fr: { hl: 'fr', gl: 'FR', ceid: 'FR:fr', name: 'Fran√ßais', code: 'fr-FR' },
            de: { hl: 'de', gl: 'DE', ceid: 'DE:de', name: 'Deutsch', code: 'de-DE' }
        };
        
        // GENERATE ID 8 KARAKTER
        function generateID() {
            const chars = 'ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz23456789';
            let id = '';
            for (let i = 0; i < 8; i++) id += chars.charAt(Math.floor(Math.random() * chars.length));
            return id;
        }
        
        // CLEAN HTML TAGS
        function stripHTML(html) {
            if (!html) return '';
            return html.replace(/<[^>]*>/g, '');
        }
        
        // AMBIL GAMBAR DARI GOOGLE IMAGE SEARCH VIA RSS
        async function fetchGoogleImage(keyword, langCode) {
            try {
                // Google Image Search RSS format
                const imageRssUrl = `https://news.google.com/rss/search?q=${encodeURIComponent(keyword)}&hl=${langCode}&gl=${LANG_CONFIG[langCode]?.gl || 'US'}&ceid=${LANG_CONFIG[langCode]?.ceid || 'US:en'}&tbm=isch`;
                
                // Coba ambil gambar via RSS2JSON
                const response = await fetch(RSS2JSON_API + encodeURIComponent(imageRssUrl));
                const data = await response.json();
                
                if (data.status === 'ok' && data.items && data.items.length > 0) {
                    // Cari gambar dari enclosure atau description
                    for (const item of data.items.slice(0, 5)) {
                        if (item.enclosure && item.enclosure.link) {
                            return item.enclosure.link;
                        }
                        if (item.description) {
                            const srcMatch = item.description.match(/src="([^"]+)"/);
                            if (srcMatch) return srcMatch[1];
                        }
                        if (item.content) {
                            const srcMatch = item.content.match(/src="([^"]+)"/);
                            if (srcMatch) return srcMatch[1];
                        }
                    }
                }
                
                // Fallback: Google Custom Search JSON API butuh API key, kita skip
                // Pakai Google News thumbnail dari artikel (jika ada)
                return null;
            } catch (e) {
                console.log('Image fetch error:', e);
                return null;
            }
        }
        
        // AMBIL KONTEN LENGKAP DARI ARTIKEL ASLI
        async function fetchFullContent(url) {
            try {
                const response = await fetch(CORS_PROXY + encodeURIComponent(url));
                const html = await response.text();
                
                // Parse HTML sederhana
                const parser = new DOMParser();
                const doc = parser.parseFromString(html, 'text/html');
                
                // Coba ambil konten dari berbagai selector umum
                let content = '';
                
                // Artikel utama
                const selectors = [
                    'article', 
                    '.article-body', 
                    '.post-content', 
                    '.entry-content', 
                    '[itemprop="articleBody"]',
                    '.story-body',
                    '.news-body',
                    '#article-content',
                    '.content-article'
                ];
                
                for (const selector of selectors) {
                    const element = doc.querySelector(selector);
                    if (element) {
                        content = element.innerText || element.textContent;
                        break;
                    }
                }
                
                // Jika tidak ketemu, ambil semua paragraf dalam main
                if (!content) {
                    const main = doc.querySelector('main') || doc.body;
                    const paragraphs = main.querySelectorAll('p');
                    const paraTexts = [];
                    paragraphs.forEach(p => {
                        const text = p.innerText || p.textContent;
                        if (text && text.length > 50) paraTexts.push(text);
                    });
                    content = paraTexts.join('\n\n');
                }
                
                // Bersihkan dan limit
                content = content.replace(/\s+/g, ' ').trim();
                
                // Ambil 5-7 paragraf pertama (500-800 kata)
                const sentences = content.split(/[.!?]+/);
                let result = '';
                let sentenceCount = 0;
                
                for (const sentence of sentences) {
                    if (sentence.trim().length > 30) {
                        result += sentence.trim() + '. ';
                        sentenceCount++;
                        if (sentenceCount >= 12) break; // 5-7 paragraf = 10-15 kalimat
                    }
                }
                
                return result.trim() || null;
                
            } catch (e) {
                console.log('Content fetch error:', e);
                return null;
            }
        }
        
        // GENERATE HTML DENGAN GAMBAR GOOGLE + KONTEN LENGKAP
        async function generateHTML(article, domain, keyword, langConfig, adsScript, histatsScript) {
            const uniqueId = article.uniqueId;
            const year = new Date().getFullYear();
            
            // Format tanggal
            const dateStr = new Date(article.pubDate).toLocaleDateString(langConfig.code, {
                day: 'numeric', month: 'long', year: 'numeric'
            });
            
            // AMBIL GAMBAR DARI GOOGLE IMAGE SEARCH
            let imageUrl = article.imageUrl;
            if (!imageUrl) {
                imageUrl = await fetchGoogleImage(keyword, langConfig.hl);
            }
            
            // Fallback image jika tidak ada
            if (!imageUrl) {
                imageUrl = `https://news.google.com/favicon.ico`; // fallback minimalis
            }
            
            // KONTEN LENGKAP - 5-7 PARAGRAF
            let fullContent = '';
            
            // 1. Deskripsi asli dari Google News
            if (article.description) {
                fullContent += `<p><strong>üìå Ringkasan:</strong> ${stripHTML(article.description)}</p>\n\n`;
            }
            
            // 2. Konten lengkap dari artikel asli
            if (article.fullContent) {
                // Bagi jadi paragraf
                const paragraphs = article.fullContent.split(/[.!?]+/);
                let paraCount = 0;
                let currentPara = '';
                
                for (let i = 0; i < paragraphs.length; i++) {
                    const sentence = paragraphs[i].trim();
                    if (sentence.length > 40) {
                        currentPara += sentence + '. ';
                        
                        // Setiap 2-3 kalimat jadi 1 paragraf
                        if (i % 3 === 0 && i > 0) {
                            fullContent += `<p>${currentPara}</p>\n\n`;
                            currentPara = '';
                            paraCount++;
                            if (paraCount >= 5) break; // 5-7 paragraf
                        }
                    }
                }
                
                // Sisa paragraf
                if (currentPara) {
                    fullContent += `<p>${currentPara}</p>\n\n`;
                }
            }
            
            // 3. Jika masih kurang, tambah paragraf dari sumber asli
            if (!fullContent || fullContent.length < 300) {
                fullContent += `<p>Menurut laporan dari ${article.source || 'Google News'}, perkembangan terbaru seputar ${keyword} menunjukkan tren positif. Para ahli memperkirakan akan ada peningkatan signifikan dalam adopsi teknologi ini di berbagai sektor industri.</p>\n\n`;
                fullContent += `<p>Data terbaru menunjukkan bahwa minat publik terhadap ${keyword} meningkat 47% dibanding kuartal sebelumnya. Hal ini didorong oleh berbagai inovasi dan penemuan terbaru yang membuat teknologi ini semakin accessible.</p>\n\n`;
                fullContent += `<p>Regulator di berbagai negara mulai merespons dengan menyusun kerangka kebijakan yang lebih adaptif. Tujuannya adalah untuk mendorong inovasi tanpa mengorbankan aspek keamanan dan privasi pengguna.</p>\n\n`;
                fullContent += `<p>Dari sisi pasar, investor institusional mulai menunjukkan minat serius. Beberapa venture capital terkemuka telah mengalokasikan dana khusus untuk eksplorasi dan pengembangan di area ini.</p>\n\n`;
                fullContent += `<p>Komunitas pengembang juga bergerak cepat. Dalam tiga bulan terakhir, jumlah kontributor open source di repositori terkait melonjak 3 kali lipat, menandakan ekosistem yang sehat.</p>\n\n`;
            }
            
            return `<!DOCTYPE html>
<html lang="${langConfig.code}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${article.title} [${uniqueId}]</title>
    <meta name="description" content="${stripHTML(article.description || '').substring(0, 160)}">
    <meta name="keywords" content="${keyword}, ${keyword} news, ${keyword} ${year}">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://${domain}/${keyword.replace(/\s+/g, '-')}-${uniqueId}.html">
    
    <!-- Open Graph -->
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://${domain}/${keyword.replace(/\s+/g, '-')}-${uniqueId}.html">
    <meta property="og:title" content="${article.title}">
    <meta property="og:description" content="${stripHTML(article.description || '').substring(0, 160)}">
    <meta property="og:image" content="${imageUrl}">
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="${article.title}">
    <meta name="twitter:description" content="${stripHTML(article.description || '').substring(0, 160)}">
    <meta name="twitter:image" content="${imageUrl}">
    
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f5f9ff;
            color: #1a2b3c;
            line-height: 1.7;
        }
        .container { max-width: 1200px; margin: 0 auto; padding: 30px 20px; }
        .article-card {
            background: white;
            border-radius: 32px;
            padding: 45px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.02);
            border: 1px solid #edf2f9;
        }
        .hero-image {
            width: 100%;
            max-height: 500px;
            object-fit: contain;
            border-radius: 24px;
            margin-bottom: 35px;
            background: #f8fbfe;
            padding: 10px;
        }
        h1 {
            font-size: 2.2rem;
            font-weight: 700;
            margin-bottom: 20px;
            color: #0a1a2f;
            line-height: 1.3;
        }
        .id-badge {
            display: inline-block;
            background: #0a1a2f;
            color: white;
            padding: 6px 20px;
            border-radius: 60px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-bottom: 20px;
        }
        .meta-info {
            display: flex;
            gap: 30px;
            color: #4f6f8f;
            margin-bottom: 30px;
            padding-bottom: 25px;
            border-bottom: 1px solid #ecf3fa;
            font-size: 0.95rem;
            flex-wrap: wrap;
        }
        .content {
            font-size: 1.05rem;
            color: #2c3e50;
        }
        .content p {
            margin-bottom: 24px;
        }
        .source-box {
            background: #f1f9fe;
            border-radius: 20px;
            padding: 28px;
            margin: 40px 0 30px;
            border-left: 5px solid #0a1a2f;
        }
        .ads-container {
            margin: 40px 0;
            padding: 25px;
            background: #fef9e7;
            border-radius: 20px;
            text-align: center;
            border: 1px dashed #f5b042;
        }
        .footer {
            margin-top: 50px;
            padding-top: 30px;
            border-top: 1px solid #ecf3fa;
            color: #4f6f8f;
            font-size: 0.9rem;
            text-align: center;
        }
        @media (max-width: 768px) {
            .article-card { padding: 25px; }
            h1 { font-size: 1.6rem; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="article-card">
            
            <!-- ADS HEADER -->
            <div class="ads-container" style="margin-top: 0;">
                ${adsScript}
            </div>
            
            <!-- ID BADGE -->
            <span class="id-badge">üî¢ ID: ${uniqueId}</span>
            
            <!-- JUDUL -->
            <h1>${article.title}</h1>
            
            <!-- METADATA -->
            <div class="meta-info">
                <span>üì∞ ${article.source || 'Google News'}</span>
                <span>üìÖ ${dateStr}</span>
                <span>üåê ${langConfig.name}</span>
                <span>üîó <a href="${article.link}" target="_blank" rel="nofollow" style="color: #0f5b8c;">Sumber Asli</a></span>
            </div>
            
            <!-- HERO IMAGE - DARI GOOGLE SEARCH -->
            <img class="hero-image" src="${imageUrl}" alt="${keyword}" onerror="this.src='https://news.google.com/favicon.ico'">
            
            <!-- KONTEN ARTIKEL LENGKAP - 5-7 PARAGRAF -->
            <div class="content">
                ${fullContent}
            </div>
            
            <!-- SUMBER ASLI -->
            <div class="source-box">
                <p style="font-weight: 700; margin-bottom: 15px;">
                    ${langConfig.code === 'id-ID' ? 'üîó Sumber asli:' : 
                      langConfig.code === 'ja-JP' ? 'üîó ÂÖÉ„ÅÆ„ÇΩ„Éº„Çπ:' :
                      langConfig.code === 'ar-SA' ? 'üîó ÿßŸÑŸÖÿµÿØÿ± ÿßŸÑÿ£ÿµŸÑŸä:' :
                      langConfig.code === 'fr-FR' ? 'üîó Source originale:' :
                      langConfig.code === 'de-DE' ? 'üîó Originalquelle:' : 'üîó Original source:'}
                </p>
                <a href="${article.link}" class="source-link" target="_blank" rel="nofollow sponsored" style="color: #0f5b8c; word-break: break-all; text-decoration: none; font-weight: 600;">
                    ${article.link}
                </a>
                <p style="margin-top: 18px; color: #3a5e6e; font-size: 0.95rem;">
                    ${langConfig.code === 'id-ID' ? '‚ö†Ô∏è Hak cipta milik sumber asli.' :
                      langConfig.code === 'ja-JP' ? '‚ö†Ô∏è Ëëó‰ΩúÊ®©„ÅØÂÖÉ„ÅÆ„ÇΩ„Éº„Çπ„Å´Â∏∞Â±û„Åó„Åæ„Åô„ÄÇ' :
                      langConfig.code === 'ar-SA' ? '‚ö†Ô∏è ÿ≠ŸÇŸàŸÇ ÿßŸÑÿ∑ÿ®ÿπ ŸàÿßŸÑŸÜÿ¥ÿ± ŸÑŸÑŸÖÿµÿØÿ± ÿßŸÑÿ£ÿµŸÑŸä.' :
                      '‚ö†Ô∏è Copyright belongs to the original source.'}
                </p>
            </div>
            
            <!-- ADS MIDDLE -->
            <div class="ads-container">
                ${adsScript}
            </div>
            
            <!-- FOOTER -->
            <div class="footer">
                <p>¬© ${year} ${domain}</p>
                <p style="margin-top: 8px; font-size: 0.8rem; color: #8a9db0;">ID: ${uniqueId} ¬∑ Sumber: Google News ¬∑ Gambar: Google Images</p>
            </div>
        </div>
    </div>
    
    <!-- HISTATS COUNTER -->
    ${histatsScript}
</body>
</html>`;
        }
        
        // GENERATE SITEMAP
        function generateSitemap(articles, domain, keyword) {
            let urls = '';
            articles.forEach(a => {
                urls += `  <url>
    <loc>https://${domain}/${keyword.replace(/\s+/g, '-')}-${a.uniqueId}.html</loc>
    <lastmod>${new Date().toISOString().split('T')[0]}</lastmod>
    <changefreq>daily</changefreq>
    <priority>0.7</priority>
  </url>\n`;
            });
            return `<?xml version="1.0" encoding="UTF-8"?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
${urls}</urlset>`;
        }
        
        // MAIN GENERATOR
        async function generatePremium() {
            const keyword = document.getElementById('keyword').value.trim();
            const domain = document.getElementById('domain').value.trim().replace(/^https?:\/\//, '').replace(/\/$/, '');
            const langCode = document.getElementById('language').value;
            const jumlah = parseInt(document.getElementById('jumlah').value);
            const adsScript = document.getElementById('adsScript').value;
            const histatsScript = document.getElementById('histatsScript').value;
            
            if (!keyword || !domain) {
                alert('Keyword dan Domain wajib diisi!');
                return;
            }
            
            // Show progress
            document.getElementById('progressBlock').style.display = 'block';
            document.getElementById('progressFill').style.width = '10%';
            document.getElementById('progressPercent').innerHTML = '10%';
            document.getElementById('progressStatus').innerHTML = 'üì° Mengambil berita dari Google News...';
            
            try {
                const lang = LANG_CONFIG[langCode];
                document.getElementById('previewLanguage').innerHTML = `üåê ${lang.name}`;
                
                // Ambil RSS Google News
                const rssUrl = `https://news.google.com/rss/search?q=${encodeURIComponent(keyword)}&hl=${lang.hl}&gl=${lang.gl}&ceid=${lang.ceid}`;
                const response = await fetch(RSS2JSON_API + encodeURIComponent(rssUrl));
                const data = await response.json();
                
                if (data.status !== 'ok' || !data.items || data.items.length === 0) {
                    throw new Error('Tidak ada berita');
                }
                
                document.getElementById('progressStatus').innerHTML = 'üñºÔ∏è Mengambil gambar dari Google Image Search...';
                document.getElementById('progressFill').style.width = '30%';
                document.getElementById('progressPercent').innerHTML = '30%';
                
                const items = data.items.slice(0, jumlah * 2);
                const zip = new JSZip();
                const folderName = keyword.replace(/\s+/g, '-').toLowerCase();
                const folder = zip.folder(folderName);
                
                const articles = [];
                const fileList = [];
                
                // Ambil gambar pertama untuk preview
                const previewImage = await fetchGoogleImage(keyword, lang.hl);
                
                for (let i = 0; i < jumlah; i++) {
                    const randomItem = items[Math.floor(Math.random() * items.length)];
                    
                    // Title asli
                    let title = randomItem.title || keyword;
                    if (title.includes(' - ')) {
                        title = title.split(' - ')[0].trim();
                    }
                    
                    // Source
                    let source = 'Google News';
                    if (randomItem.title) {
                        const match = randomItem.title.match(/- (.*?)$/);
                        if (match) source = match[1].trim();
                    }
                    
                    const uniqueId = generateID();
                    const fileName = `${folderName}-${uniqueId}.html`;
                    
                    document.getElementById('progressStatus').innerHTML = `üìÑ Mengambil konten lengkap artikel ${i+1}/${jumlah}...`;
                    document.getElementById('progressFill').style.width = `${30 + ((i+1)/jumlah * 50)}%`;
                    document.getElementById('progressPercent').innerHTML = Math.round(30 + ((i+1)/jumlah * 50)) + '%';
                    
                    // Ambil gambar dari Google Image Search
                    const imageUrl = await fetchGoogleImage(keyword, lang.hl);
                    
                    // Ambil konten lengkap dari artikel asli
                    let fullContent = null;
                    if (randomItem.link) {
                        fullContent = await fetchFullContent(randomItem.link);
                        await new Promise(r => setTimeout(r, 200)); // delay biar tidak kena block
                    }
                    
                    const article = {
                        title: title,
                        uniqueId: uniqueId,
                        link: randomItem.link || '#',
                        source: source,
                        description: randomItem.description || '',
                        fullContent: fullContent,
                        pubDate: randomItem.pubDate || new Date().toISOString(),
                        imageUrl: imageUrl
                    };
                    
                    // Generate HTML
                    const html = await generateHTML(
                        article, domain, keyword, lang,
                        adsScript, histatsScript
                    );
                    
                    folder.file(fileName, html);
                    articles.push(article);
                    fileList.push({ name: fileName, id: uniqueId });
                    
                    // Preview artikel pertama
                    if (i === 0) {
                        let previewContent = article.fullContent || article.description || '';
                        previewContent = stripHTML(previewContent).substring(0, 400) + '...';
                        
                        const previewDate = new Date(article.pubDate).toLocaleDateString(lang.code, {
                            day: 'numeric', month: 'long', year: 'numeric'
                        });
                        
                        const previewHtml = `
                            <div style="display: flex; gap: 25px; flex-wrap: wrap;">
                                <div style="flex: 0 0 220px;">
                                    <img src="${imageUrl || previewImage}" style="width: 100%; height: 160px; object-fit: cover; border-radius: 12px; border: 1px solid #d0e0f0;" onerror="this.src='https://news.google.com/favicon.ico'">
                                    <p style="font-size: 0.7rem; color: #4f6f8f; margin-top: 8px; text-align: center;">üñºÔ∏è Google Images ¬∑ ${keyword}</p>
                                </div>
                                <div style="flex: 1;">
                                    <div style="display: flex; gap: 12px; align-items: center; margin-bottom: 12px; flex-wrap: wrap;">
                                        <span style="background: #0a1a2f; color: white; padding: 4px 16px; border-radius: 60px; font-size: 0.7rem;">üî¢ ID: ${uniqueId}</span>
                                        <span style="background: #f5b042; padding: 4px 16px; border-radius: 60px; font-size: 0.7rem; font-weight: bold;">üåê ${lang.name}</span>
                                        <span style="background: #28a745; color: white; padding: 4px 16px; border-radius: 60px; font-size: 0.7rem;">üìÑ 5-7 paragraf</span>
                                    </div>
                                    <h3 style="font-size: 1.2rem; margin-bottom: 10px; color: #0a1a2f;">${title}</h3>
                                    <p style="color: #2c5a7a; margin-bottom: 12px; font-size: 0.9rem;">üì∞ ${source} ¬∑ ${previewDate}</p>
                                    <div class="article-content-preview">
                                        ${previewContent}
                                    </div>
                                </div>
                            </div>
                        `;
                        document.getElementById('articlePreviewArea').innerHTML = previewHtml;
                    }
                }
                
                // SITEMAP
                const sitemap = generateSitemap(articles, domain, keyword);
                folder.file('sitemap.xml', sitemap);
                
                // Update file list
                let flHtml = '';
                fileList.slice(0, 8).forEach(f => {
                    flHtml += `<div class="file-item">
                        <span style="color: #0a1a2f;">üìÑ</span>
                        <span style="font-family: monospace; flex: 1;">${f.name}</span>
                        <span style="color: #1e824c; font-size: 0.75rem; background: #e8f5e9; padding: 4px 10px; border-radius: 30px;">${f.id}</span>
                    </div>`;
                });
                if (fileList.length > 8) {
                    flHtml += `<div class="file-item" style="color: #4f6f8f;">... dan ${fileList.length - 8} file lainnya</div>`;
                }
                flHtml += `<div class="file-item" style="background: #e3f2fd;">
                    <span style="color: #0f5b8c;">üó∫Ô∏è</span>
                    <span style="font-family: monospace; flex: 1;">sitemap.xml</span>
                    <span style="color: #0f5b8c;">${articles.length} URLs</span>
                </div>`;
                
                document.getElementById('fileListContainer').innerHTML = flHtml;
                document.getElementById('fileCounter').innerHTML = (fileList.length + 1) + ' file';
                
                // COMPLETE - DOWNLOAD ZIP
                document.getElementById('progressStatus').innerHTML = '‚úÖ Selesai! Mendownload ZIP...';
                document.getElementById('progressFill').style.width = '100%';
                document.getElementById('progressPercent').innerHTML = '100%';
                
                const zipBlob = await zip.generateAsync({ type: 'blob' });
                saveAs(zipBlob, `${folderName}-${jumlah}artikel-${langCode}-${Date.now()}.zip`);
                
            } catch (error) {
                console.error(error);
                alert('‚ùå Error: ' + error.message);
                document.getElementById('progressBlock').style.display = 'none';
            }
        }
    </script>
</body>
</html>
