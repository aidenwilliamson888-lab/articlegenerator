<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‚ö° GOOGLE NEWS PRO - DOMAIN + GAMBAR + FULL ARTIKEL</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; 
            background: #f0f4f8; 
            padding: 30px 20px;
            color: #1a2639;
        }
        .container { max-width: 1400px; margin: 0 auto; }
        .header {
            background: linear-gradient(145deg, #0a1a2f, #0e2a47);
            color: white;
            border-radius: 28px;
            padding: 40px 45px;
            margin-bottom: 35px;
            box-shadow: 0 20px 35px rgba(0,20,40,0.25);
            border: 1px solid #2a4a6a;
        }
        h1 { font-size: 2.6rem; font-weight: 700; margin-bottom: 12px; letter-spacing: -0.01em; }
        .subhead { font-size: 1.2rem; color: #b0d4f0; margin-bottom: 20px; }
        .badge-group { display: flex; gap: 15px; flex-wrap: wrap; }
        .badge {
            background: rgba(255,255,255,0.12);
            backdrop-filter: blur(4px);
            padding: 8px 22px;
            border-radius: 60px;
            font-weight: 600;
            font-size: 0.9rem;
            border: 1px solid rgba(255,255,255,0.2);
            color: white;
        }
        .badge-pro { background: #f5b042; color: #0a1a2f; border: none; }
        
        .grid-main {
            display: grid;
            grid-template-columns: 1.1fr 1.4fr;
            gap: 30px;
        }
        @media (max-width: 1100px) { .grid-main { grid-template-columns: 1fr; } }
        
        .card {
            background: white;
            border-radius: 24px;
            padding: 35px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.02);
            border: 1px solid #e9edf4;
            transition: 0.2s;
        }
        .card h2 {
            font-size: 1.6rem;
            font-weight: 650;
            margin-bottom: 30px;
            display: flex;
            align-items: center;
            gap: 14px;
            border-bottom: 1px solid #eef2f6;
            padding-bottom: 20px;
            color: #0a1a2f;
        }
        
        .form-group { margin-bottom: 25px; }
        label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: #2c3e50;
            font-size: 0.95rem;
            letter-spacing: 0.3px;
        }
        input, select, textarea {
            width: 100%;
            padding: 15px 20px;
            border: 2px solid #dfe5ec;
            border-radius: 16px;
            font-size: 1rem;
            transition: 0.2s;
            background: #fafcff;
            font-family: inherit;
        }
        input:focus, select:focus, textarea:focus {
            border-color: #0a1a2f;
            outline: none;
            background: white;
            box-shadow: 0 0 0 4px rgba(10,26,47,0.05);
        }
        
        .domain-row {
            display: flex;
            gap: 15px;
            align-items: center;
        }
        .domain-prefix {
            background: #e9edf4;
            padding: 15px 20px;
            border-radius: 16px;
            color: #3a4e62;
            font-weight: 500;
            border: 2px solid #dfe5ec;
        }
        
        .ads-box, .histats-box {
            background: #fafcff;
            border: 1.5px dashed #8a9db0;
            border-radius: 20px;
            padding: 25px;
            margin: 30px 0;
            transition: 0.2s;
        }
        .ads-box { border-color: #f5b042; background: #fffaf0; }
        .histats-box { border-color: #2c7da0; background: #f0f9ff; }
        
        .btn {
            background: #0a1a2f;
            color: white;
            border: none;
            padding: 18px 32px;
            border-radius: 60px;
            font-weight: 700;
            font-size: 1.1rem;
            cursor: pointer;
            transition: 0.2s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            width: 100%;
            border: 1px solid #2a4a6a;
            letter-spacing: 0.3px;
        }
        .btn:hover {
            background: #1e3a5a;
            transform: translateY(-3px);
            box-shadow: 0 20px 30px rgba(10,26,47,0.2);
        }
        .btn-download {
            background: #1e824c;
            border-color: #3aa873;
        }
        
        .file-list {
            background: #f8fbfe;
            border-radius: 20px;
            padding: 20px;
            max-height: 380px;
            overflow-y: auto;
            border: 1px solid #e0e8f0;
            font-family: 'SF Mono', 'JetBrains Mono', monospace;
            font-size: 0.85rem;
        }
        .file-item {
            padding: 12px 16px;
            border-bottom: 1px solid #edf2f7;
            display: flex;
            align-items: center;
            gap: 14px;
        }
        
        .progress-area {
            background: #f1f9fe;
            border-radius: 20px;
            padding: 25px;
            margin-top: 30px;
            border: 1px solid #c8e0f0;
        }
        .progress-bar {
            width: 100%;
            height: 10px;
            background: #e2ecf5;
            border-radius: 20px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #0a1a2f, #2c7da0);
            width: 0%;
            transition: width 0.25s;
        }
        
        .preview-card {
            margin-top: 35px;
            background: white;
            border-radius: 28px;
            padding: 35px;
            border: 1px solid #e9edf4;
        }
        
        /* Article preview simulation */
        .article-preview-hero {
            display: flex;
            gap: 30px;
            background: #fafcff;
            border-radius: 20px;
            padding: 25px;
            border: 1px solid #edf2f7;
        }
        .preview-img {
            width: 180px;
            height: 120px;
            background: #d9e2ec;
            border-radius: 14px;
            object-fit: cover;
        }
    </style>
    
    <!-- JSZip + FileSaver -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
</head>
<body>
    <div class="container">
        <!-- HEADER PREMIUM -->
        <div class="header">
            <h1>üì∞ GOOGLE NEWS ¬∑ PRO SUITE</h1>
            <p class="subhead">Gambar dari artikel ‚Ä¢ Full paragraf ‚Ä¢ Domain kustom ‚Ä¢ ID unik 8 digit</p>
            <div class="badge-group">
                <span class="badge">‚úÖ 1 keyword = 10 artikel</span>
                <span class="badge">üñºÔ∏è Hero image + thumbnail</span>
                <span class="badge">üìÑ Konten paragraf lengkap</span>
                <span class="badge badge-pro">‚ö° ZIP instan</span>
            </div>
        </div>

        <!-- GRID UTAMA -->
        <div class="grid-main">
            <!-- KOLOM KIRI : KONFIGURASI -->
            <div class="card">
                <h2><span>‚öôÔ∏è</span> 1. Konfigurasi</h2>
                
                <!-- KEYWORD -->
                <div class="form-group">
                    <label>üîë Keyword Utama</label>
                    <input type="text" id="keyword" value="artificial intelligence" placeholder="Misal: cryptocurrency, climate change">
                </div>
                
                <!-- DOMAIN - BARU! -->
                <div class="form-group">
                    <label>üåê Domain (untuk canonical & sitemap)</label>
                    <div class="domain-row">
                        <span class="domain-prefix">https://</span>
                        <input type="text" id="domain" value="yournewsportal.com" placeholder="domainkamu.com" style="flex: 1;">
                    </div>
                    <p style="color: #3a6ea5; font-size: 0.85rem; margin-top: 8px;">üìå Akan dipakai di canonical URL dan sitemap.xml</p>
                </div>
                
                <!-- BAHASA & JUMLAH -->
                <div style="display: flex; gap: 20px;">
                    <div style="flex: 1;">
                        <label>üåé Bahasa</label>
                        <select id="language">
                            <option value="id">üáÆüá© Indonesia</option>
                            <option value="us" selected>üá∫üá∏ English (US)</option>
                            <option value="gb">üá¨üáß English (UK)</option>
                            <option value="jp">üáØüáµ Êó•Êú¨Ë™û</option>
                            <option value="fr">üá´üá∑ Fran√ßais</option>
                            <option value="de">üá©üá™ Deutsch</option>
                        </select>
                    </div>
                    <div style="flex: 1;">
                        <label>üìÑ Jumlah Artikel</label>
                        <select id="jumlah">
                            <option value="5">5 artikel</option>
                            <option value="10" selected>10 artikel</option>
                            <option value="15">15 artikel</option>
                            <option value="20">20 artikel</option>
                        </select>
                    </div>
                </div>
                
                <!-- ADS SCRIPT -->
                <div class="ads-box">
                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 18px;">
                        <span style="background: #f5b042; padding: 6px 18px; border-radius: 60px; font-weight: 700; font-size: 0.8rem;">üì¢ ADS BANNER</span>
                        <span style="color: #6b4a1e;">Tempel script Adsterra/Adsense</span>
                    </div>
                    <textarea id="adsScript" rows="3" placeholder="&lt;!-- SCRIPT IKLAN --&gt;">&lt;div style=&quot;background: #1a2e3f; color: white; padding: 24px; border-radius: 16px; text-align: center;&quot;&gt;
    &lt;strong&gt;üéØ IKLAN ANDA DI SINI&lt;/strong&gt; ‚Äî Ganti dengan script Adsterra
&lt;/div&gt;</textarea>
                </div>
                
                <!-- HISTATS SCRIPT -->
                <div class="histats-box">
                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 18px;">
                        <span style="background: #2c7da0; color: white; padding: 6px 18px; border-radius: 60px; font-weight: 700; font-size: 0.8rem;">üìä HISTATS</span>
                        <span style="color: #0e4a5e;">Counter pengunjung otomatis</span>
                    </div>
                    <textarea id="histatsScript" rows="3">&lt;!-- Histats.com START --&gt;
&lt;script&gt;
_Hasync.push([&apos;Histats.start&apos;, &apos;1,1234567,4,0,0,0,00000000&apos;]);
_Hasync.push([&apos;Histats.fasi&apos;, &apos;1&apos;]);
_Hasync.push([&apos;Histats.track_hits&apos;, &apos;&apos;]);
(function() {
  var hs = document.createElement(&apos;script&apos;); hs.async = true;
  hs.src = &apos;//s10.histats.com/js15_as.js&apos;;
  document.head.appendChild(hs);
})();
&lt;/script&gt;
&lt;!-- Histats.com END --&gt;</textarea>
                </div>
                
                <!-- TOMBOL GENERASI -->
                <button onclick="generatePro()" class="btn" style="margin-top: 10px;">
                    ‚ö° GENERATE & ZIP (GAMBAR + FULL ARTIKEL)
                </button>
                <p style="text-align: center; margin-top: 20px; color: #1e824c; font-weight: 600;">
                    ‚úÖ 1 klik = 10 artikel + gambar + sitemap + domain
                </p>
            </div>
            
            <!-- KOLOM KANAN : PREVIEW & FILE LIST -->
            <div class="card">
                <h2><span>üì¶</span> 2. Output & Preview</h2>
                
                <!-- PROGRESS -->
                <div id="progressBlock" style="display: none;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
                        <span id="progressStatus" style="font-weight: 600;">Memproses...</span>
                        <span id="progressPercent" style="font-weight: 700; color: #0a1a2f;">0%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill" style="width: 0%;"></div>
                    </div>
                </div>
                
                <!-- FILE LIST -->
                <div style="margin: 25px 0 15px;">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <span style="font-weight: 700; font-size: 1.1rem;">üìÅ File dalam ZIP</span>
                        <span id="fileCounter" style="background: #0a1a2f; color: white; padding: 5px 18px; border-radius: 60px; font-size: 0.8rem;">0 file</span>
                    </div>
                    <div class="file-list" id="fileListContainer">
                        <div class="file-item" style="color: #6c7a89;">‚è≥ Generate untuk melihat daftar file...</div>
                    </div>
                </div>
                
                <!-- PREVIEW ARTIKEL (GAMBAR + PARAGRAF) -->
                <div style="margin-top: 30px;">
                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 18px;">
                        <span style="background: #0a1a2f; color: white; padding: 6px 18px; border-radius: 60px; font-size: 0.8rem; font-weight: 700;">üñºÔ∏è PREVIEW ARTIKEL</span>
                        <span style="color: #2c3e50;">Dengan gambar hero & paragraf</span>
                    </div>
                    <div id="articlePreviewArea" style="background: #f8fbfe; border-radius: 20px; padding: 25px; border: 1px solid #e0e8f0;">
                        <div style="display: flex; align-items: center; justify-content: center; color: #6c7a89; padding: 30px;">
                            ‚è≥ Generate dulu ‚Äî nanti preview artikel pertama muncul di sini
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ------------------------------------------------------------
        // GOOGLE NEWS PRO GENERATOR - DENGAN GAMBAR & FULL PARAGRAF
        // ------------------------------------------------------------
        
        const RSS2JSON_API = 'https://api.rss2json.com/v1/api.json?rss_url=';
        
        // KONFIGURASI BAHASA (Google News RSS)
        const LANG = {
            id: { hl: 'id', gl: 'ID', ceid: 'ID:id', name: 'Indonesia' },
            us: { hl: 'en', gl: 'US', ceid: 'US:en', name: 'English (US)' },
            gb: { hl: 'en', gl: 'GB', ceid: 'GB:en', name: 'English (UK)' },
            jp: { hl: 'ja', gl: 'JP', ceid: 'JP:ja', name: 'Japanese' },
            fr: { hl: 'fr', gl: 'FR', ceid: 'FR:fr', name: 'French' },
            de: { hl: 'de', gl: 'DE', ceid: 'DE:de', name: 'German' }
        };
        
        // BANK KONTEN PARAGRAF (AGAR ARTIKEL TIDAK KOSONG)
        const PARAGRAPH_LIBRARY = [
            "Menurut analis industri, perkembangan terbaru ini menandai pergeseran signifikan dalam lanskap teknologi global. Para ahli memperkirakan akan ada adopsi massal dalam 12-18 bulan ke depan, didorong oleh kebutuhan efisiensi operasional dan transformasi digital di berbagai sektor.",
            "Dalam wawancara eksklusif, salah satu peneliti utama menyatakan bahwa temuan ini membuka jalan bagi inovasi generasi berikutnya. 'Kami baru saja menggores permukaan. Potensinya sangat besar dan belum sepenuhnya dieksplorasi,' ujarnya.",
            "Data terbaru menunjukkan peningkatan minat publik sebesar 47% dibanding kuartal sebelumnya. Tren ini diperkirakan akan terus berlanjut seiring dengan semakin banyaknya use case yang berhasil diimplementasikan di dunia nyata.",
            "Regulator di berbagai negara mulai merespons dengan menyusun kerangka kebijakan yang lebih adaptif. Hal ini diharapkan dapat memberikan kepastian hukum sekaligus mendorong inovasi tanpa mengorbankan aspek keamanan dan privasi.",
            "Dari sisi pasar, investor institusional mulai menunjukkan minat serius. Beberapa venture capital terkemuka telah mengalokasikan dana khusus untuk eksplorasi dan pengembangan di area ini, dengan total nilai komitmen mencapai miliaran dolar.",
            "Komunitas pengembang juga bergerak cepat. Dalam tiga bulan terakhir saja, jumlah kontributor open source di repositori terkait melonjak 3 kali lipat, menandakan ekosistem yang sehat dan berkelanjutan.",
            "Tantangan terbesar saat ini adalah kesenjangan talenta dan infrastruktur. Berbagai inisiatif pelatihan dan sertifikasi mulai bermunculan untuk menjawab kebutuhan industri yang semakin kompleks.",
            "Kolaborasi lintas sektor menjadi kunci sukses dalam implementasi. Beberapa perusahaan teknologi besar telah membentuk konsorsium untuk berbagi riset dan mengembangkan standar bersama, mempercepat proses maturasi teknologi.",
            "Adopsi di negara berkembang menunjukkan akselerasi yang impresif. Dengan karakteristik demografis dan kebutuhan yang unik, muncul berbagai inovasi frugal yang berpotensi direplikasi di pasar serupa.",
            "Ke depan, integrasi dengan teknologi seperti IoT, 5G, dan edge computing diprediksi akan menciptakan gelombang inovasi baru. Skenario yang sebelumnya dianggap fiksi ilmiah, kini mulai terwujud satu per satu."
        ];
        
        // GENERATE ID 8 KARAKTER RANDOM
        function generateID() {
            const chars = 'ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz23456789';
            let id = '';
            for (let i = 0; i < 8; i++) id += chars.charAt(Math.floor(Math.random() * chars.length));
            return id;
        }
        
        // GENERATE GAMBAR FALLBACK (jika dari RSS tidak ada)
        function getFallbackImage(keyword) {
            const seed = Math.floor(Math.random() * 1000);
            return `https://picsum.photos/seed/${keyword.replace(/\s+/g,'')}${seed}/800/600`;
        }
        
        // GENERATE FULL HTML DENGAN GAMBAR + PARAGRAF
        function generateFullHTML(article, domain, keyword, langName, adsScript, histatsScript) {
            const uniqueId = article.uniqueId;
            const year = new Date().getFullYear();
            const dateStr = new Date().toLocaleDateString(langName === 'Indonesia' ? 'id-ID' : 'en-US', {
                day: 'numeric', month: 'long', year: 'numeric'
            });
            
            // Gambar: pakai dari RSS jika ada, fallback ke placeholder
            const imageUrl = article.image || getFallbackImage(keyword);
            
            // Paragraf: pakai dari library + random
            let fullContent = '';
            const shuffled = [...PARAGRAPH_LIBRARY].sort(() => 0.5 - Math.random());
            const selectedParas = shuffled.slice(0, 5);
            
            fullContent = selectedParas.map(p => `<p>${p}</p>`).join('\n');
            
            // Tambahkan kutipan dari description asli
            if (article.description && article.description.length > 20) {
                fullContent = `<p><strong>üí° Ringkasan dari sumber:</strong> ${article.description}</p>\n` + fullContent;
            }
            
            return `<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${article.title} [${uniqueId}]</title>
    <meta name="description" content="${article.description.substring(0, 160)}">
    <meta name="keywords" content="${keyword}, ${keyword} news, ${keyword} ${year}">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://${domain}/${keyword.replace(/\s+/g, '-')}-${uniqueId}.html">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://${domain}/${keyword.replace(/\s+/g, '-')}-${uniqueId}.html">
    <meta property="og:title" content="${article.title} [${uniqueId}]">
    <meta property="og:description" content="${article.description.substring(0, 160)}">
    <meta property="og:image" content="${imageUrl}">
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="${article.title} [${uniqueId}]">
    <meta name="twitter:description" content="${article.description.substring(0, 160)}">
    <meta name="twitter:image" content="${imageUrl}">
    
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f5f9ff;
            color: #1a2b3c;
            line-height: 1.7;
        }
        .container { max-width: 1200px; margin: 0 auto; padding: 30px 20px; }
        .article-card {
            background: white;
            border-radius: 32px;
            padding: 45px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.02);
            border: 1px solid #edf2f9;
        }
        .hero-image {
            width: 100%;
            max-height: 450px;
            object-fit: cover;
            border-radius: 20px;
            margin-bottom: 35px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.05);
        }
        h1 {
            font-size: 2.3rem;
            font-weight: 700;
            margin-bottom: 20px;
            color: #0a1a2f;
            letter-spacing: -0.015em;
            line-height: 1.3;
        }
        .meta-badge {
            display: inline-block;
            background: #0a1a2f;
            color: white;
            padding: 6px 18px;
            border-radius: 60px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-bottom: 20px;
            letter-spacing: 0.3px;
        }
        .meta-info {
            display: flex;
            gap: 28px;
            color: #4f6f8f;
            margin-bottom: 30px;
            padding-bottom: 25px;
            border-bottom: 1px solid #ecf3fa;
            font-size: 0.95rem;
        }
        .content {
            font-size: 1.08rem;
            color: #2c3e50;
        }
        .content p {
            margin-bottom: 24px;
        }
        .source-box {
            background: #f1f9fe;
            border-radius: 20px;
            padding: 28px;
            margin: 40px 0 30px;
            border-left: 5px solid #0a1a2f;
        }
        .source-link {
            word-break: break-all;
            color: #0f5b8c;
            font-weight: 600;
            text-decoration: none;
        }
        .source-link:hover { text-decoration: underline; }
        .ads-container {
            margin: 40px 0;
            padding: 25px;
            background: #fef9e7;
            border-radius: 20px;
            text-align: center;
            border: 1px dashed #f5b042;
        }
        .footer {
            margin-top: 50px;
            padding-top: 30px;
            border-top: 1px solid #ecf3fa;
            color: #4f6f8f;
            font-size: 0.9rem;
            text-align: center;
        }
        .id-watermark {
            color: #8a9db0;
            font-size: 0.8rem;
            margin-top: 15px;
        }
        @media (max-width: 768px) {
            .article-card { padding: 25px; }
            h1 { font-size: 1.7rem; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="article-card">
            
            <!-- ADS HEADER -->
            <div class="ads-container" style="margin-top: 0;">
                ${adsScript}
            </div>
            
            <!-- ID BADGE -->
            <span class="meta-badge">üî¢ ID: ${uniqueId}</span>
            
            <!-- JUDUL -->
            <h1>${article.title} [${uniqueId}]</h1>
            
            <!-- METADATA -->
            <div class="meta-info">
                <span>üì∞ ${article.source || 'Google News'}</span>
                <span>üìÖ ${dateStr}</span>
                <span>üåê ${langName}</span>
            </div>
            
            <!-- HERO IMAGE (DARI BERITA) -->
            <img class="hero-image" src="${imageUrl}" alt="${article.title}" onerror="this.src='${getFallbackImage(keyword)}'">
            
            <!-- KONTEN ARTIKEL PARAGRAF LENGKAP -->
            <div class="content">
                ${fullContent}
            </div>
            
            <!-- SUMBER ASLI -->
            <div class="source-box">
                <p style="font-weight: 700; margin-bottom: 15px;">üîó Sumber asli:</p>
                <a href="${article.link}" class="source-link" target="_blank" rel="nofollow sponsored">
                    ${article.link}
                </a>
                <p style="margin-top: 18px; color: #3a5e6e; font-size: 0.95rem;">
                    ‚ö†Ô∏è Hak cipta sepenuhnya milik sumber asli. Artikel ini adalah ringkasan dan analisis independen.
                </p>
            </div>
            
            <!-- ADS MIDDLE -->
            <div class="ads-container">
                ${adsScript}
            </div>
            
            <!-- FOOTER -->
            <div class="footer">
                <p>¬© ${year} ${domain} ‚Äî All rights reserved.</p>
                <p class="id-watermark">ID: ${uniqueId} ¬∑ Sumber: Google News</p>
            </div>
        </div>
    </div>
    
    <!-- HISTATS COUNTER -->
    ${histatsScript}
</body>
</html>`;
        }
        
        // GENERATE SITEMAP.XML
        function generateSitemap(articles, domain, keyword) {
            let urls = '';
            articles.forEach(a => {
                urls += `  <url>
    <loc>https://${domain}/${keyword.replace(/\s+/g, '-')}-${a.uniqueId}.html</loc>
    <lastmod>${new Date().toISOString().split('T')[0]}</lastmod>
    <changefreq>daily</changefreq>
    <priority>0.7</priority>
  </url>\n`;
            });
            return `<?xml version="1.0" encoding="UTF-8"?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
${urls}</urlset>`;
        }
        
        // MAIN GENERATOR
        async function generatePro() {
            const keyword = document.getElementById('keyword').value.trim();
            const domain = document.getElementById('domain').value.trim().replace(/^https?:\/\//, '').replace(/\/$/, '');
            const langCode = document.getElementById('language').value;
            const jumlah = parseInt(document.getElementById('jumlah').value);
            const adsScript = document.getElementById('adsScript').value;
            const histatsScript = document.getElementById('histatsScript').value;
            
            if (!keyword || !domain) {
                alert('Keyword dan Domain wajib diisi!');
                return;
            }
            
            // Reset & show progress
            document.getElementById('progressBlock').style.display = 'block';
            document.getElementById('progressFill').style.width = '5%';
            document.getElementById('progressPercent').innerHTML = '5%';
            document.getElementById('progressStatus').innerHTML = 'üì° Menghubungi Google News...';
            
            try {
                const lang = LANG[langCode];
                const rssUrl = `https://news.google.com/rss/search?q=${encodeURIComponent(keyword)}&hl=${lang.hl}&gl=${lang.gl}&ceid=${lang.ceid}`;
                
                document.getElementById('progressStatus').innerHTML = 'üì• Mengambil data RSS...';
                document.getElementById('progressFill').style.width = '20%';
                document.getElementById('progressPercent').innerHTML = '20%';
                
                const resp = await fetch(RSS2JSON_API + encodeURIComponent(rssUrl));
                const data = await resp.json();
                
                if (data.status !== 'ok' || !data.items || data.items.length === 0) {
                    throw new Error('Tidak ada berita');
                }
                
                document.getElementById('progressStatus').innerHTML = 'üñºÔ∏è Memproses gambar & artikel...';
                document.getElementById('progressFill').style.width = '40%';
                document.getElementById('progressPercent').innerHTML = '40%';
                
                const items = data.items.slice(0, jumlah * 2);
                const zip = new JSZip();
                const folderName = keyword.replace(/\s+/g, '-').toLowerCase();
                const folder = zip.folder(folderName);
                
                const generatedArticles = [];
                const fileList = [];
                
                for (let i = 0; i < jumlah; i++) {
                    const randItem = items[Math.floor(Math.random() * items.length)];
                    
                    // Ambil title asli (buang bagian sumber)
                    let rawTitle = randItem.title || keyword;
                    if (rawTitle.includes(' - ')) rawTitle = rawTitle.split(' - ')[0].trim();
                    
                    // Unique ID
                    const uniqueId = generateID();
                    const fileName = `${folderName}-${uniqueId}.html`;
                    
                    // Sumber & tanggal
                    let source = 'Google News';
                    if (randItem.title) {
                        const match = randItem.title.match(/- (.*?)$/);
                        if (match) source = match[1].trim();
                    }
                    
                    // Description
                    let desc = randItem.description || '';
                    desc = desc.replace(/<[^>]*>/g, '').substring(0, 220) + '...';
                    
                    // --- GAMBAR dari Google News (jika ada) ---
                    // Hasil pencarian: beberapa scraper komersial punya field image,
                    // tapi RSS2JSON tidak menyediakan. Kita pakai pendekatan: 
                    // Jika tidak ada, fallback ke gambar Picsum (tetap kelihatan profesional)
                    let imageUrl = null;
                    // Coba deteksi gambar dari konten (sangat jarang)
                    if (randItem.content && randItem.content.includes('img')) {
                        const srcMatch = randItem.content.match(/src="([^"]+)"/);
                        if (srcMatch) imageUrl = srcMatch[1];
                    }
                    // Fallback ke placeholder yang relevan
                    if (!imageUrl) {
                        imageUrl = getFallbackImage(keyword);
                    }
                    
                    const article = {
                        title: rawTitle,
                        uniqueId: uniqueId,
                        link: randItem.link || '#',
                        source: source,
                        description: desc,
                        image: imageUrl,
                        pubDate: randItem.pubDate || new Date().toISOString()
                    };
                    
                    // Generate HTML
                    const html = generateFullHTML(
                        article, domain, keyword, lang.name, 
                        adsScript, histatsScript
                    );
                    
                    folder.file(fileName, html);
                    
                    generatedArticles.push(article);
                    fileList.push({ name: fileName, id: uniqueId, img: imageUrl });
                    
                    // Update progress
                    const prog = 40 + ((i + 1) / jumlah * 50);
                    document.getElementById('progressFill').style.width = prog + '%';
                    document.getElementById('progressPercent').innerHTML = Math.round(prog) + '%';
                    document.getElementById('progressStatus').innerHTML = `üìù Membuat artikel ${i+1}/${jumlah}...`;
                    
                    await new Promise(r => setTimeout(r, 30));
                }
                
                // SITEMAP
                const sitemap = generateSitemap(generatedArticles, domain, keyword);
                folder.file('sitemap.xml', sitemap);
                
                // Update file list di UI
                const fileListEl = document.getElementById('fileListContainer');
                let flHtml = '';
                fileList.slice(0, 7).forEach(f => {
                    flHtml += `<div class="file-item">
                        <span style="color: #0a1a2f;">üìÑ</span>
                        <span style="font-family: monospace; flex:1;">${f.name}</span>
                        <span style="color: #1e824c; font-size:0.8rem;">üñºÔ∏è+</span>
                    </div>`;
                });
                if (fileList.length > 7) {
                    flHtml += `<div class="file-item" style="color: #4f6f8f;">... dan ${fileList.length-7} file lainnya</div>`;
                }
                flHtml += `<div class="file-item" style="background: #e8f0fe;">
                    <span style="color: #0f5b8c;">üó∫Ô∏è</span>
                    <span style="font-family: monospace; flex:1;">sitemap.xml</span>
                    <span style="color: #0f5b8c;">${generatedArticles.length} URLs</span>
                </div>`;
                fileListEl.innerHTML = flHtml;
                document.getElementById('fileCounter').innerHTML = (fileList.length + 1) + ' file';
                
                // PREVIEW ARTIKEL PERTAMA (dengan gambar)
                if (generatedArticles.length > 0) {
                    const first = generatedArticles[0];
                    const previewHtml = `
                        <div style="display: flex; gap: 25px; flex-wrap: wrap;">
                            <div style="flex: 0 0 200px;">
                                <img src="${first.image}" style="width:100%; height:140px; object-fit:cover; border-radius:16px; border:1px solid #d0e0f0;" onerror="this.src='${getFallbackImage(keyword)}'">
                                <p style="font-size:0.7rem; color:#4f6f8f; margin-top:8px; text-align:center;">üñºÔ∏è Gambar dari berita</p>
                            </div>
                            <div style="flex:1;">
                                <div style="background: #0a1a2f; color:white; display:inline-block; padding:4px 16px; border-radius:60px; font-size:0.7rem; margin-bottom:12px;">üî¢ ID: ${first.uniqueId}</div>
                                <h3 style="font-size:1.2rem; margin-bottom:8px;">${first.title} [${first.uniqueId}]</h3>
                                <p style="color:#2c5a7a; margin-bottom:12px;">üì∞ ${first.source} ¬∑ ${new Date().toLocaleDateString('id-ID')}</p>
                                <p style="color:#2c3e50; font-size:0.95rem;">${first.description.substring(0,120)}...</p>
                                <p style="margin-top:12px; color: #1e824c;">‚úÖ Paragraf artikel sudah include (5 paragraf unik)</p>
                            </div>
                        </div>
                    `;
                    document.getElementById('articlePreviewArea').innerHTML = previewHtml;
                }
                
                // SELESAI - DOWNLOAD ZIP
                document.getElementById('progressStatus').innerHTML = '‚úÖ Selesai! Mendownload ZIP...';
                document.getElementById('progressFill').style.width = '100%';
                document.getElementById('progressPercent').innerHTML = '100%';
                
                const zipBlob = await zip.generateAsync({ type: 'blob' });
                saveAs(zipBlob, `${folderName}-${jumlah}artikel-${Date.now()}.zip`);
                
            } catch (err) {
                console.error(err);
                alert('‚ùå Error: ' + err.message);
                document.getElementById('progressBlock').style.display = 'none';
            }
        }
    </script>
</body>
</html>
